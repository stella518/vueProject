webpackJsonp([2],{"5Ahk":function(t,e){},"6dWP":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){var t=this;return{fullHeight:document.documentElement.clientHeight-73,userList:[{title:"姓名",key:"nickName"},{title:"编号",key:"userNo"},{title:"类型",key:"userType"},{title:"隶属机构",key:"orgName"},{title:"隶属门店",key:"storeName"},{title:"创建时间",key:"createTime"},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.edit(o.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.deleteMol=!0}}},"删除")])}}],userData:[],page:1,size:10,total:10,token:this.$store.state.token,deleteMol:!1,delete_loading:!1,choose_index:-1,formItem:{id:"",nickName:"",storeId:"",orgId:"",userType:"",token:this.$store.state.token},organizaList:[],storeList:[],managerTypeList:["后台管理员","运营人员","风控人员","客服人员","法人","店员","店长","机构管理员","消费用户"],formInline:{orgId:null,storeId:null,nickName:"",phone:"",userType:""}}},created:function(){this.getBackUserList(),this.getSelectOrganizaList()},methods:{getBackUserList:function(){var t=this;this.$api.post("/user/back/getBackUser/"+this.token+"/"+this.page+"/"+this.size,this.formInline,function(e){console.log(e),"SUCCESS"==e.status&&(t.userData=e.data,t.total=e.total_count)})},getSelectOrganizaList:function(){var t=this;this.$api.post("/org/getSelectOrganizaList/",{},function(e){console.log(e),"SUCCESS"==e.status&&(t.organizaList=e.data)})},getSelectStoreList:function(t){var e=this;this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"load-c",size:18}}),t("div","Loading")])}}),this.$api.post("/org/getSelectStoreList/"+t,{},function(t){console.log(t),e.$Spin.hide(),"SUCCESS"==t.status&&(e.storeList=t.data)})},addUser:function(){var t=this;this.formItem.id="",this.formItem.nickName="",this.formItem.storeId="",this.formItem.orgId="",this.formItem.userType="",this.$Modal.confirm({render:function(e){return e("Form",[e("FormItem",[e("Input",{props:{value:"",autofocus:!0,placeholder:"请输入姓名"},on:{input:function(e){t.formItem.nickName=e}}})]),e("FormItem",[e("Input",{props:{value:"",autofocus:!0,placeholder:"请输入编号"},on:{input:function(e){t.formItem.userNo=e}}})]),e("FormItem",[e("Select",{props:{placeholder:"请选择所属机构"},on:{"on-change":function(e){t.formItem.orgId=e,t.getSelectStoreList(e)}}},t.organizaList.map(function(t){return e("Option",{props:{value:t.orgId,label:t.name}})}))]),e("FormItem",[e("Select",{props:{placeholder:"请选择隶属门店"},on:{"on-change":function(e){t.formItem.storeId=e}}},t.storeList.map(function(t){return e("Option",{props:{value:t.storeId,label:t.storeName}})}))]),e("FormItem",[e("Select",{props:{placeholder:"请选择类型"},on:{"on-change":function(e){t.formItem.userType=e}}},t.managerTypeList.map(function(t){return e("Option",{props:{value:t}})}))])])},onOk:function(){var e=t.formItem.token;console.log(t.formItem),t.$api.post("/user/back/register/"+e,t.formItem,function(e){console.log(e),"SUCCESS"==e.status&&(t.$Message.success(e.desc),t.getBackUserList())})}})},del:function(){var t=parseInt(this.choose_index);this.organData[t].orgId;this.delete_loading=!0},edit:function(t){var e=this;this.formItem.id=t.id,this.formItem.nickName=t.nickName,this.formItem.storeId=t.storeId,this.formItem.orgId=t.orgId,this.formItem.userNo=t.userNo,this.formItem.userType=t.userType,this.$Modal.confirm({render:function(o){return o("Form",[o("FormItem",[o("Input",{props:{value:t.nickName,autofocus:!0,placeholder:"请输入姓名"},on:{input:function(t){e.formItem.nickName=t}}})]),o("FormItem",[o("Input",{props:{value:t.userNo,autofocus:!0,placeholder:"请输入编号"},on:{input:function(t){e.formItem.userNo=t}}})]),o("FormItem",[o("Select",{props:{placeholder:"请选择所属机构"},on:{"on-change":function(t){e.formItem.orgId=t}}},e.organizaList.map(function(t){return o("Option",{props:{value:t.orgId,label:t.name}})}))]),o("FormItem",[o("Select",{props:{placeholder:"请选择隶属门店"},on:{"on-change":function(t){e.formItem.storeId=t}}},e.storeList.map(function(t){return o("Option",{props:{value:t.storeId,label:t.storeName}})}))]),o("FormItem",[o("Select",{props:{placeholder:"请选择类型",value:t.userType},on:{"on-change":function(t){e.formItem.userType=t}}},e.managerTypeList.map(function(t){return o("Option",{props:{value:t}})}))])])},onOk:function(){var t=e.formItem.id,o=e.formItem.token;e.$api.post("/user/back/editBackUser/"+o+"/"+t,e.formItem,function(t){console.log(t),"SUCCESS"==t.status&&(e.$Message.success(t.desc),e.getBackUserList())})}})},changePage:function(t){this.page=t,this.getBackUserList()},handleSubmit:function(t){this.getBackUserList()}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{style:{minWidth:"600px",overflow:"scroll"}},[o("layout",[o("Form",{ref:"formInline",staticStyle:{float:"right"},attrs:{model:t.formInline,inline:"","label-width":80}},[o("Row",[o("Col",{attrs:{span:"6",sm:6,md:6,lg:6,xs:12}},[o("FormItem",{attrs:{prop:"nickName",label:"姓名"}},[o("Input",{attrs:{type:"text",placeholder:"姓名"},model:{value:t.formInline.nickName,callback:function(e){t.$set(t.formInline,"nickName",e)},expression:"formInline.nickName"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person"},slot:"prepend"})],1)],1)],1),t._v(" "),o("Col",{attrs:{span:"6",sm:6,md:6,lg:6,xs:12}},[o("FormItem",{attrs:{prop:"phone",label:"手机"}},[o("Input",{attrs:{type:"text",placeholder:"手机"},model:{value:t.formInline.phone,callback:function(e){t.$set(t.formInline,"phone",e)},expression:"formInline.phone"}},[o("Icon",{attrs:{slot:"prepend",type:"iphone"},slot:"prepend"})],1)],1)],1),t._v(" "),o("Col",{attrs:{span:"6",sm:6,md:6,lg:6,xs:12}},[o("FormItem",{attrs:{prop:"orgId",label:"机构ID"}},[o("Input",{attrs:{type:"text",placeholder:"机构ID"},model:{value:t.formInline.orgId,callback:function(e){t.$set(t.formInline,"orgId",e)},expression:"formInline.orgId"}},[o("Icon",{attrs:{slot:"prepend",type:"grid"},slot:"prepend"})],1)],1)],1),t._v(" "),o("Col",{attrs:{span:"6",sm:6,md:6,lg:6,xs:0}},[o("div",{staticClass:"control"},[o("Button",{staticClass:"addBtn",attrs:{icon:"plus-round",type:"primary"},on:{click:function(e){t.addUser()}}},[t._v("新增")])],1)])],1),t._v(" "),o("Row",[o("Col",{attrs:{span:"6",sm:6,md:6,lg:6,xs:12}},[o("FormItem",{attrs:{prop:"storeId",label:"门店ID"}},[o("Input",{attrs:{type:"text",placeholder:"门店ID"},model:{value:t.formInline.storeId,callback:function(e){t.$set(t.formInline,"storeId",e)},expression:"formInline.storeId"}},[o("Icon",{attrs:{slot:"prepend",type:"grid"},slot:"prepend"})],1)],1)],1),t._v(" "),o("Col",{attrs:{span:"6",sm:6,md:6,lg:6,xs:12}},[o("FormItem",{attrs:{label:"类型"}},[o("Select",{staticStyle:{width:"165px"},attrs:{size:"large"},model:{value:t.formInline.userType,callback:function(e){t.$set(t.formInline,"userType",e)},expression:"formInline.userType"}},t._l(t.managerTypeList,function(e){return o("Option",{key:e.id,attrs:{value:e}},[t._v(t._s(e))])}))],1)],1),t._v(" "),o("Col",{attrs:{sm:0,md:0,lg:0,xs:4}},[o("Button",{staticClass:"addBtn",attrs:{icon:"plus-round",type:"primary",size:"large"},on:{click:function(e){t.addUser()}}},[t._v("新增")])],1),t._v(" "),o("Col",{staticClass:"search",attrs:{span:"12",sm:12,md:12,lg:12,xs:4}},[o("FormItem",[o("Button",{staticClass:"searchBtn",attrs:{type:"primary",icon:"ios-search",size:"large"},on:{click:function(e){t.handleSubmit("formInline")}}},[t._v("查询")])],1)],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{span:"24"}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"ios-list"}}),t._v("\n                    后台管理人员\n                ")],1),t._v(" "),o("Row",{staticClass:"advanced-router",attrs:{type:"flex",justify:"center",align:"middle"}},[o("Table",{attrs:{height:"500",columns:t.userList,data:t.userData}})],1),t._v(" "),o("Page",{staticClass:"pager",attrs:{total:t.total},on:{"on-change":t.changePage}}),t._v(" "),o("modal",{attrs:{width:"360"},model:{value:t.deleteMol,callback:function(e){t.deleteMol=e},expression:"deleteMol"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("icon",{attrs:{type:"information-circled"}}),t._v(" "),o("span",[t._v("确认删除")])],1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("您是否确定删除此条记录")])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("i-button",{attrs:{type:"error",size:"large",long:"",loading:t.delete_loading},on:{click:t.del}},[t._v("删除")])],1)])],1)],1)],1)],1)},staticRenderFns:[]};var s=o("Z0/y")(n,r,!1,function(t){o("5Ahk")},"data-v-be274630",null);e.default=s.exports}});
//# sourceMappingURL=2.367ad7936c67a02c2c96.js.map