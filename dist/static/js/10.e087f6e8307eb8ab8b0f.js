webpackJsonp([10],{Ntyz:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("3cXf"),s=t.n(o),a=t("uAC3"),r=t.n(a),i={data:function(){return{formInline:{loginName:"",password:""},ruleInline:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},userData:{}}},created:function(){},methods:{handleSubmit:function(e){var n=this;this.$refs[e].validate(function(e){e?(r.a.set("user",n.formInline.loginName),r.a.set("password",n.formInline.password),n.login()):n.$Message.error("Fail!")})},login:function(){var e=this;this.handleSpinCustom();this.formInline.loginName,this.formInline.password;this.$api.get("/user/back/login?loginName="+this.formInline.loginName+"&password="+this.formInline.password,null,function(n){console.log(n),"SUCCESS"==n.status&&(e.userData=n.data,e.$store.commit("SET_TOKEN",n.data.token),e.$store.commit("SET_USERDATA",n.data),localStorage.setItem("token",n.data.token),localStorage.setItem("userData",s()(n.data)),e.$Spin.hide(),e.$router.push({name:"home_index"}))})},handleSpinCustom:function(){this.$Spin.show({render:function(e){return e("div",[e("Icon",{class:"demo-spin-icon-load",props:{type:"load-c",size:18}}),e("div","Loading")])}})},getMenu:function(e){var n=this;this.$api.get("/user/back/queryMenu/"+e,{},function(e){if(console.log(e),"SUCCESS"==e.status)for(var t=JSON.parse(e.data),o=0;o<t.length;o++){var s=t[o];if(0==s.access&&n.editmenu(s.name,"",s.access),s.children)for(var a=s.children,r=0;r<a;r++){var i=a[r];0==i.access&&n.editmenu(s.name,i.name,i.access)}}})},editmenu:function(e,n,t){console.log("parentName:"+e+"-childrenName:"+n+"-access:"+t);for(var o=this.$store.state.menuList,s=0;s<o.length;s++){var a=o[s];if(e&&!n&&e==a.title)a.access=t;else if(e&&n&&a.children)for(var r=a.children,i=0;i<r.length;i++){var l=r[i];l.title==n&&(l.access=t)}}console.log(o),this.$store.commit("SET_MENULIST",o)}}},l={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"base"},[t("h1",[e._v("消费金融管理平台")]),e._v(" "),t("div",{staticClass:"main_center"},[t("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[t("FormItem",{attrs:{prop:"loginName"}},[t("Input",{attrs:{type:"text",placeholder:"用户名",autofocus:!0,size:"large"},model:{value:e.formInline.loginName,callback:function(n){e.$set(e.formInline,"loginName",n)},expression:"formInline.loginName"}},[t("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"密码",size:"large"},model:{value:e.formInline.password,callback:function(n){e.$set(e.formInline,"password",n)},expression:"formInline.password"}},[t("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),t("FormItem",[t("Button",{attrs:{type:"primary",long:""},on:{click:function(n){e.handleSubmit("formInline")}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var c=t("Z0/y")(i,l,!1,function(e){t("QIN3")},"data-v-39ca2c7a",null);n.default=c.exports},QIN3:function(e,n){}});
//# sourceMappingURL=10.e087f6e8307eb8ab8b0f.js.map